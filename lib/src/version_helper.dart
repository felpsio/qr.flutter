import 'package:qr/qr.dart';
// import 'package:qr_flutter/qr_flutter.dart';

int optimalVersion(String qrCode, {int correctionLievel = QrErrorCorrectLevel.L}) {
  final int length = qrCode.length;
  // QrErrorCorrectLevel
  switch(correctionLievel) {
    case QrErrorCorrectLevel.H:
      if (length < 7)    return 1;
      if (length < 14)   return 2;
      if (length < 24)   return 3;
      if (length < 34)   return 4;
      if (length < 44)   return 5;
      if (length < 58)   return 6;
      if (length < 64)   return 7;
      if (length < 84)   return 8;
      if (length < 98)   return 9;
      if (length < 119)  return 10;
      if (length < 137)  return 11;
      if (length < 155)  return 12;
      if (length < 177)  return 13;
      if (length < 194)  return 14;
      if (length < 220)  return 15;
      if (length < 250)  return 16;
      if (length < 280)  return 17;
      if (length < 310)  return 18;
      if (length < 338)  return 19;
      if (length < 382)  return 20;
      if (length < 403)  return 21;
      if (length < 439)  return 22;
      if (length < 461)  return 23;
      if (length < 511)  return 24;
      if (length < 535)  return 25;
      if (length < 593)  return 26;
      if (length < 625)  return 27;
      if (length < 658)  return 28;
      if (length < 698)  return 29;
      if (length < 742)  return 30;
      if (length < 790)  return 31;
      if (length < 842)  return 32;
      if (length < 898)  return 33;
      if (length < 958)  return 34;
      if (length < 983)  return 35;
      if (length < 1051) return 36;
      if (length < 1093) return 37;
      if (length < 1139) return 38;
      if (length < 1219) return 39;
      if (length < 1273) return 40;
      break;
    case QrErrorCorrectLevel.L:
      if (length < 17)   return 1;
      if (length < 32)   return 2;
      if (length < 53)   return 3;
      if (length < 78)   return 4;
      if (length < 106)  return 5;
      if (length < 134)  return 6;
      if (length < 154)  return 7;
      if (length < 192)  return 8;
      if (length < 230)  return 9;
      if (length < 271)  return 10;
      if (length < 321)  return 11;
      if (length < 367)  return 12;
      if (length < 425)  return 13;
      if (length < 458)  return 14;
      if (length < 520)  return 15;
      if (length < 586)  return 16;
      if (length < 644)  return 17;
      if (length < 718)  return 18;
      if (length < 792)  return 19;
      if (length < 858)  return 20;
      if (length < 929)  return 21;
      if (length < 1003) return 22;
      if (length < 1091) return 23;
      if (length < 1171) return 24;
      if (length < 1273) return 25;
      if (length < 1367) return 26;
      if (length < 1465) return 27;
      if (length < 1528) return 28;
      if (length < 1628) return 29;
      if (length < 1732) return 30;
      if (length < 1840) return 31;
      if (length < 1952) return 32;
      if (length < 2068) return 33;
      if (length < 2188) return 34;
      if (length < 2303) return 35;
      if (length < 2431) return 36;
      if (length < 2563) return 37;
      if (length < 2699) return 38;
      if (length < 2809) return 39;
      if (length < 2953) return 40;
      break;
    case QrErrorCorrectLevel.M:
      if (length < 14)   return 1;
      if (length < 26)   return 2;
      if (length < 42)   return 3;
      if (length < 62)   return 4;
      if (length < 84)   return 5;
      if (length < 106)  return 6;
      if (length < 122)  return 7;
      if (length < 152)  return 8;
      if (length < 180)  return 9;
      if (length < 213)  return 10;
      if (length < 251)  return 11;
      if (length < 287)  return 12;
      if (length < 331)  return 13;
      if (length < 362)  return 14;
      if (length < 412)  return 15;
      if (length < 450)  return 16;
      if (length < 504)  return 17;
      if (length < 560)  return 18;
      if (length < 624)  return 19;
      if (length < 666)  return 20;
      if (length < 711)  return 21;
      if (length < 779)  return 22;
      if (length < 857)  return 23;
      if (length < 911)  return 24;
      if (length < 997)  return 25;
      if (length < 1059) return 26;
      if (length < 1125) return 27;
      if (length < 1190) return 28;
      if (length < 1264) return 29;
      if (length < 1370) return 30;
      if (length < 1452) return 31;
      if (length < 1538) return 32;
      if (length < 1628) return 33;
      if (length < 1722) return 34;
      if (length < 1809) return 35;
      if (length < 1911) return 36;
      if (length < 1989) return 37;
      if (length < 2099) return 38;
      if (length < 2213) return 39;
      if (length < 2331) return 40;
      break;
    case QrErrorCorrectLevel.Q:
      if (length < 11)   return 1;
      if (length < 20)   return 2;
      if (length < 32)   return 3;
      if (length < 46)   return 4;
      if (length < 60)   return 5;
      if (length < 74)   return 6;
      if (length < 86)   return 7;
      if (length < 108)  return 8;
      if (length < 130)  return 9;
      if (length < 151)  return 10;
      if (length < 177)  return 11;
      if (length < 203)  return 12;
      if (length < 241)  return 13;
      if (length < 258)  return 14;
      if (length < 292)  return 15;
      if (length < 322)  return 16;
      if (length < 364)  return 17;
      if (length < 394)  return 18;
      if (length < 442)  return 19;
      if (length < 482)  return 20;
      if (length < 509)  return 21;
      if (length < 565)  return 22;
      if (length < 611)  return 23;
      if (length < 661)  return 24;
      if (length < 715)  return 25;
      if (length < 751)  return 26;
      if (length < 805)  return 27;
      if (length < 868)  return 28;
      if (length < 908)  return 29;
      if (length < 982)  return 30;
      if (length < 1030) return 31;
      if (length < 1112) return 32;
      if (length < 1168) return 33;
      if (length < 1228) return 34;
      if (length < 1283) return 35;
      if (length < 1351) return 36;
      if (length < 1423) return 37;
      if (length < 1499) return 38;
      if (length < 1579) return 39;
      if (length < 1663) return 40;
      break;
  }
  return 4;
  
}